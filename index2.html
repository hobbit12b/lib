<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rekenvragen, nieuwe set</title>
  <style>
    :root {
      font-family: system-ui, Arial, sans-serif;
      line-height: 1.4;
    }
    body {
      margin: 0;
      background: #f7f7fb;
      color: #111;
    }
    .wrap {
      max-width: 960px;
      margin: 0 auto;
      padding: 24px;
    }
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 16px;
    }
    h1 {
      font-size: 22px;
      margin: 0;
    }
    .progress {
      width: 220px;
      height: 10px;
      background: #e6e6ef;
      border-radius: 9999px;
      overflow: hidden;
      flex-shrink: 0;
    }
    .bar {
      height: 100%;
      width: 0%;
      background: #4c6ef5;
      transition: width 240ms ease;
    }
    .card {
      background: #fff;
      border: 1px solid #e8e8ef;
      border-radius: 16px;
      box-shadow: 0 6px 14px rgba(17, 17, 17, 0.06);
      padding: 20px;
    }
    .qtext {
      font-size: 20px;
      margin: 0 0 12px;
    }
    .illustration {
      display: block;
      width: 100%;
      max-height: 340px;
      object-fit: contain;
      background: #fafafa;
      border: 1px solid #eee;
      border-radius: 12px;
      margin: 12px 0 8px;
    }
    .caption {
      font-size: 13px;
      color: #555;
      margin: 0 0 14px;
    }
    .choices {
      display: grid;
      grid-template-columns: repeat(2, minmax(140px, 1fr));
      gap: 10px;
      margin: 10px 0 6px;
    }
    .choice {
      padding: 14px 16px;
      border-radius: 12px;
      border: 1px solid #dfe3f0;
      background: #f8f9ff;
      font-size: 18px;
      cursor: pointer;
      text-align: center;
      user-select: none;
      transition: transform 120ms ease, background 120ms ease, border-color 120ms ease;
    }
    .choice:hover { transform: translateY(-1px); }
    .choice.correct { background: #e8f9ef; border-color: #b7e4c7; }
    .choice.wrong { background: #fdecec; border-color: #f5b5b5; }
    .inputRow {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 8px 0 0;
      flex-wrap: wrap;
    }
    input[type="number"] {
      font-size: 18px;
      padding: 10px 12px;
      border: 1px solid #dfe3f0;
      border-radius: 12px;
      width: 160px;
      background: #fff;
      outline: none;
    }
    input[type="number"]:focus { border-color: #4c6ef5; }
    button {
      font-size: 16px;
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid #cfd6ee;
      background: #eef2ff;
      cursor: pointer;
    }
    .primary { background: #4c6ef5; color: #fff; border-color: #4c6ef5; }
    .ghost { background: #fff; }
    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-top: 16px;
    }
    .feedback {
      min-height: 24px;
      font-size: 16px;
      margin-top: 6px;
    }
    .ok { color: #18794e; }
    .nietok { color: #a61e4d; }
    .note {
      font-size: 13px;
      color: #666;
      margin-top: 6px;
    }
    .sr {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Rekenspel, nieuwe vragen</h1>
      <div class="progress" aria-label="voortgang">
        <div class="bar" id="bar"></div>
      </div>
    </header>

    <div class="card">
      <p class="qtext" id="qtext"></p>
      <img id="illustration" class="illustration" alt="illustratie bij de vraag" />
      <p class="caption" id="caption"></p>

      <!-- meerkeuze voor vraag 1 -->
      <div id="choices" class="choices" aria-live="polite"></div>

      <!-- invoer voor overige vragen -->
      <div id="inputRow" class="inputRow" style="display:none">
        <label class="sr" for="answer">antwoord</label>
        <input id="answer" type="number" inputmode="numeric" autocomplete="off" />
        <button id="check" class="primary">controleer</button>
        <button id="clear" class="ghost" title="wis antwoord">wis</button>
      </div>

      <div id="feedback" class="feedback" aria-live="polite"></div>
      <div id="note" class="note"></div>

      <div class="nav">
        <button id="prev" class="ghost">vorige</button>
        <div>
          <button id="retry" class="ghost">opnieuw</button>
          <button id="next" class="primary">volgende</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Configuratie van de vijf nieuwe vragen
    // type mc voor meerkeuze, type input voor invoer met controleren waar mogelijk
    const QUESTIONS = [
      {
        id: 1,
        type: "mc",
        text: "Op de getallenlijn hangen de kaartjes 1, 14 en 20. Op de tafel liggen de kaartjes 10, 12, 5 en 18 die ook opgehangen moeten worden. Welk kaartje moet het dichtst bij 14 hangen",
        image: "06 getallenlijn.jpg",
        imageCaption: "Illustratie, 06 getallenlijn.jpg",
        options: [10, 12, 5, 18],
        correct: 12,
        keyboardVisible: false
      },
      {
        id: 2,
        type: "input",
        text: "Jan scoort met 3 ballen punten. Hoeveel is het samen",
        image: "07 poortbal.jpg",
        imageCaption: "Illustratie, 07 poortbal.jpg, docent controleert aan de hand van de afbeelding",
        correct: null, // wordt door docent bepaald met de illustratie
        teacherChecks: true
      },
      {
        id: 3,
        type: "input",
        text: "In een pot zitten 16 snoepjes. Jan eet 3 snoepjes en Eefke eet er 1. Hoeveel snoepjes blijven over",
        image: "08 snoepjes.jpg",
        imageCaption: "Illustratie, 08 snoepjes.jpg",
        correct: 12,
        teacherChecks: false
      },
      {
        id: 4,
        type: "input",
        text: "Maak sprongen van 5. Welk getal moet bij het vraagteken staan",
        image: "09 sprongen.jpg",
        imageCaption: "Illustratie, 09 sprongen.jpg, docent controleert aan de hand van de afbeelding",
        correct: null, // hangt af van de reeks in de illustratie
        teacherChecks: true
      },
      {
        id: 5,
        type: "input",
        text: "Er zijn 3 kinderen en er worden 12 kaarten eerlijk verdeeld. Hoeveel kaarten krijgt ieder kind",
        image: "10 kaarten verdelen.jpg",
        imageCaption: "Illustratie, 10 kaarten verdelen.jpg",
        correct: 4,
        teacherChecks: false
      }
    ];

    // Eenvoudige state
    let index = 0;
    const answers = new Map(); // questionId -> userAnswer

    // Elementen
    const qtextEl = document.getElementById("qtext");
    const imgEl = document.getElementById("illustration");
    const capEl = document.getElementById("caption");
    const choicesEl = document.getElementById("choices");
    const inputRowEl = document.getElementById("inputRow");
    const answerEl = document.getElementById("answer");
    const checkEl = document.getElementById("check");
    const clearEl = document.getElementById("clear");
    const feedbackEl = document.getElementById("feedback");
    const noteEl = document.getElementById("note");
    const prevEl = document.getElementById("prev");
    const nextEl = document.getElementById("next");
    const retryEl = document.getElementById("retry");
    const barEl = document.getElementById("bar");

    function render() {
      const q = QUESTIONS[index];

      // tekst en illustratie
      qtextEl.textContent = q.text + ".";
      imgEl.src = q.image;
      imgEl.alt = q.image;
      capEl.textContent = q.imageCaption;

      // voortgang
      const pct = Math.round(((index + 1) / QUESTIONS.length) * 100);
      barEl.style.width = pct + "%";

      // reset
      feedbackEl.textContent = "";
      feedbackEl.className = "feedback";
      noteEl.textContent = "";
      choicesEl.innerHTML = "";
      inputRowEl.style.display = "none";

      // vraagtype
      if (q.type === "mc") {
        // geen toetsenbord in beeld, alleen klikbare keuzes
        choicesEl.style.display = "grid";
        q.options.forEach((opt) => {
          const btn = document.createElement("button");
          btn.className = "choice";
          btn.textContent = String(opt);
          btn.addEventListener("click", () => {
            const juist = opt === q.correct;
            answers.set(q.id, opt);
            Array.from(choicesEl.children).forEach(c => c.classList.remove("correct", "wrong"));
            btn.classList.add(juist ? "correct" : "wrong");
            feedbackEl.textContent = juist ? "Goed gedaan." : "Kijk nog eens naar de getallenlijn.";
            feedbackEl.classList.add(juist ? "ok" : "nietok");
          });
          choicesEl.appendChild(btn);
        });
        // verberg eventuele invoer
        inputRowEl.style.display = "none";
      } else {
        choicesEl.style.display = "none";
        inputRowEl.style.display = "flex";
        answerEl.value = answers.has(q.id) ? answers.get(q.id) : "";
        if (q.teacherChecks) {
          noteEl.textContent = "Deze vraag wordt nagekeken door de leerkracht, de illustratie bepaalt het juiste antwoord.";
        }
      }

      // navigatie
      prevEl.disabled = index === 0;
      nextEl.textContent = index === QUESTIONS.length - 1 ? "afronden" : "volgende";
    }

    // controleknop voor inputvragen
    checkEl.addEventListener("click", () => {
      const q = QUESTIONS[index];
      const val = answerEl.value.trim();
      if (val === "") {
        feedbackEl.textContent = "Vul je antwoord in.";
        feedbackEl.classList.add("nietok");
        return;
      }
      const num = Number(val);
      answers.set(q.id, num);

      if (q.teacherChecks || q.correct === null) {
        feedbackEl.textContent = "Antwoord opgeslagen, leerkracht controleert met de illustratie.";
        feedbackEl.classList.add("ok");
      } else {
        const juist = num === q.correct;
        feedbackEl.textContent = juist ? "Goed gedaan." : "Kijk nog eens, probeer het opnieuw.";
        feedbackEl.classList.add(juist ? "ok" : "nietok");
      }
    });

    clearEl.addEventListener("click", () => {
      answerEl.value = "";
      feedbackEl.textContent = "";
      feedbackEl.className = "feedback";
    });

    // navigatieknoppen
    prevEl.addEventListener("click", () => {
      if (index > 0) {
        index -= 1;
        render();
      }
    });

    nextEl.addEventListener("click", () => {
      if (index < QUESTIONS.length - 1) {
        index += 1;
        render();
      } else {
        // eenvoudige afronding
        const totaal = QUESTIONS.length;
        const automatischBeoordeeld = QUESTIONS.filter(q => q.type === "mc" || (q.type === "input" && q.correct !== null)).length;
        let goed = 0;
        for (const q of QUESTIONS) {
          if (q.type === "mc") {
            if (answers.get(q.id) === q.correct) goed += 1;
          } else if (q.type === "input" && q.correct !== null) {
            if (Number(answers.get(q.id)) === q.correct) goed += 1;
          }
        }
        const tekst = `Klaar, ${goed} van ${automatischBeoordeeld} automatisch beoordeeld, ${totaal - automatischBeoordeeld} op docentcontrole.`;
        feedbackEl.textContent = tekst;
        feedbackEl.classList.add("ok");
      }
    });

    retryEl.addEventListener("click", () => {
      answers.clear();
      index = 0;
      render();
    });

    // start
    render();
  </script>
</body>
</html>
