<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Voorbeeldtoets Groep 3, Oefenomgeving, fullscreen responsive</title>
<style>
:root{
  --bg:#f2f2f2; --panel:#fff; --blue:#0d6efd; --blue-dark:#0b5ed7; --line:#e6e6e6;
  --text:#000; --muted:#666; --ok:#2fb073; --wrong:#b02f2f; --amber:#c58a00;
  --pad:clamp(12px, 2.2vw, 24px);
  --radius:16px;
  --navH:76px;
}

/* Basis, echte fullscreen */
html, body{height:100%; margin:0; padding:0}
body{
  min-height:100svh;
  font-family:Arial, Helvetica, sans-serif;
  font-size:clamp(15px, 1.1vw + .4rem, 17px);
  line-height:1.5;
  color:var(--text);
  background:var(--bg);
  display:flex; flex-direction:column;
  padding-top: var(--navH);
  padding-bottom: var(--navH);
}

/* Headerbalk met opdrachttekst */
.sky{
  height: var(--navH);
  background:var(--blue);
  border-bottom:2px solid var(--line);
  position: fixed; inset: 0 0 auto 0; z-index:1000;
  display:flex; align-items:center; justify-content:center;
  padding:0 12px;
}
.skyInner{
  width:100%; max-width:1200px; margin:0 auto;
  display:flex; align-items:center; justify-content:center; gap:12px;
}
#barPrompt{
  color:#fff; font-weight:bold; line-height:1.25;
  text-align:center;
  max-width:100%;
  display:block;
}
#barAction{ display:inline-flex; align-items:center; gap:8px; }
#barAction .ttsImgBtn img{ width:40px; height:40px; }

/* Hoofdpodium */
.stage{ flex:1 1 auto; min-height:0; display:flex; padding:clamp(8px, 1.5vw, 16px); }

/* Card */
.card{
  background:var(--panel); width:100%; height:calc(100% - 0px); min-height:0;
  border-radius:0; box-shadow:none;
  padding:calc(var(--pad) + 4px) calc(var(--pad) + 6px) var(--pad);
  position:relative; overflow:hidden; display:flex; flex-direction:column;
}
@media (min-width:900px){
  .card{ max-width:1200px; margin:0 auto; border-radius:var(--radius); box-shadow:0 1px 12px rgba(0,0,0,.08); padding-bottom:var(--pad); }
}

/* Typo */
h1{font-size:clamp(18px, 1.2vw + .8rem, 24px); font-weight:bold; margin:0 0 12px}
p{margin:0 0 10px}

/* De originele .q blijft in DOM (voor TTS), maar is visueel verborgen omdat tekst naar de balk verplaatst wordt */
.q{ position:absolute; width:1px; height:1px; margin:-1px; padding:0; border:0; clip:rect(0 0 0 0); overflow:hidden; }

/* Inputs en keuzes */
.input{
  font-size:clamp(16px, 1vw + .6rem, 18px);
  padding:10px 12px; border-radius:8px; border:1px solid #bbb;
  width:min(320px, 100%); flex-shrink:0;
}

.feedback{margin-top:8px; font-weight:bold; text-align:center; flex-shrink:0;}
.ok{color:var(--ok)} .wrong{color:var(--wrong)}
.progress{display:none}

/* TTS knoppen, algemene stijl */
.ttsRow{display:inline-flex; align-items:center; gap:10px; margin-left:8px}
.ttsImgBtn{border:0; background:transparent; padding:0; margin-left:8px; cursor:pointer; display:inline-flex; align-items:center}
.ttsImgBtn img{width:40px; height:40px; display:block}
.audioBtn{ border:0; background:#eee; width:48px; height:48px; border-radius:24px; cursor:pointer; display:inline-flex; align-items:center; justify-content:center }
.audioBtn svg{width:22px; height:22px; fill:var(--blue)}
.audioBtn img{width:22px; height:22px; display:block; object-fit:contain}

/* Sections */
.task{ display:none; text-align:center; flex-grow:1; display:flex; flex-direction:column; align-items:center; display:none !important; }
.task.active{ display:flex !important; overflow:hidden; }

/* Scènepaneel */
.inner-panel{
  background:#fff; border-radius:clamp(10px, 1vw, 16px);
  box-shadow:inset 0 0 0 1px #eee;
  width:100%; max-width:1100px; margin:10px auto 0;
  aspect-ratio:16/9; position:relative; overflow:hidden; flex-shrink:0;
}
.scene-play,.scene-pause{
  position:absolute; left:50%; top:clamp(20px, 5vh, 36px); transform:translateX(-50%);
  width:clamp(48px, 6.5vw, 64px); height:clamp(48px, 6.5vw, 64px); border:0; background:transparent; padding:0; cursor:pointer
}
.scene-play img,.scene-pause img{width:100%; height:100%; display:block}
.scene-pause.hidden,.scene-play.hidden{display:none}
.scene-boy{ position:absolute; left:50%; top:45%; transform:translate(-50%, -50%); height:min(48%, 42vh); width:auto; max-width:48%; }
.scene-girl{ position:absolute; right:clamp(12px, 2vw, 24px); bottom:clamp(10px, 2vh, 22px); height:min(52%, 46vh); width:auto; max-width:50%; }

.hidden{display:none} .hide-ui .progress{display:none}

/* Buttons algemeen */
.btn{border:1px solid #d0d0d0; background:#fff; border-radius:10px; padding:12px 16px; font-weight:bold; cursor:pointer}
.btn:hover{background:#f4f6ff}
.btn[disabled]{opacity:.5; cursor:not-allowed}

/* Eindscherm */
.review{display:none} .review.show{display:block}
.circles{ display:flex; flex-wrap:wrap; gap:10px; margin:14px 0; justify-content:center; flex-shrink:0; }
.circleBtn{ width:48px; height:48px; border-radius:24px; border:1px solid #d7d7d7; background:#eee; display:inline-flex; align-items:center; justify-content:center; font-weight:bold; cursor:pointer; line-height:1 }
.circleBtn.done{background:#fff}
.endTitle{font-weight:bold; margin-top:6px}

/* Onderbalk */
.bottomNav{
  position: fixed; bottom:0; left:0; right:0; z-index:999;
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  background:#fafafa; border:1px solid #ececec; border-radius:0;
  border-top:1px solid #ececec; border-bottom:none; border-left:none; border-right:none;
  padding:10px 12px; min-height:var(--navH);
}
.navBtn{ border:0; background:var(--blue); color:#fff; border-radius:12px; padding:12px 18px; font-weight:bold; cursor:pointer; flex:0 0 auto }
.navBtn[disabled]{background:#e0e0e0; color:#666; border:1px solid #d0d0d0; cursor:not-allowed; opacity:1}

/* Pager */
.pager{ display:flex; align-items:center; gap:8px; justify-content:center; flex:1 1 auto; flex-wrap:wrap; overflow:auto; padding:6px 4px; scrollbar-width:thin; }
.pageBtn{ width:46px; height:46px; border-radius:23px; border:1px solid #d7d7d7; background:#eee; display:inline-flex; align-items:center; justify-content:center; font-weight:bold; cursor:pointer; padding:0; line-height:1; flex:0 0 auto; }
.pageBtn.current{ width:56px; height:56px; border-radius:28px; font-size:18px; background:var(--blue); color:#fff; border-color:var(--blue) }
.pageBtn.answered:not(.current){background:#fff}

/* Eindscherm geen onderbalk */
.end-view .bottomNav{display:none}
.end-view body{padding-bottom:0}

/* Respecteer reduced motion */
@media (prefers-reduced-motion:reduce){ *{scroll-behavior:auto} }

/* Taak layout */
.task img{
  display:block; max-width:100%;
  height:auto; margin:10px auto 16px;
  border-radius:var(--radius); box-shadow:0 1px 4px rgba(0,0,0,.06);
}
/* Kleiner maken: begrens de afbeeldingshoogte stevig */
.image-container img{
  max-height: clamp(220px, 34vh, 460px);
  width:auto; object-fit:contain; margin:0;
}

.task-content-wrapper{ display:flex; flex-direction:column; align-items:center; gap:15px; flex-grow:1; width:100%; max-width:1000px; margin:0 auto; padding:0 10px; min-height:0; }
@media (min-width:768px){
  .task-content-wrapper.with-keyboard{ flex-direction:row; justify-content:center; align-items:flex-start; }
}
.image-container{ display:flex; flex-direction:column; justify-content:center; align-items:center; max-width:100%; max-height:100%; min-height:0; flex-shrink:1; }
.input-keyboard-container{ display:flex; flex-direction:column; align-items:center; gap:20px; flex-shrink:0; }

/* Virtueel toetsenbord compacter */
.keyboard{
  display:grid; grid-template-columns:repeat(3, 1fr); gap:10px;
  width:100%; max-width:320px; margin-top:15px; padding:10px;
  background:var(--bg); border-radius:var(--radius); box-shadow:0 4px 12px rgba(0,0,0,0.1);
}
.key-btn{
  background-color:var(--panel); color:var(--text); border:1px solid var(--line);
  border-radius:12px; padding:0; font-size:clamp(28px, 4.5vw, 42px); font-weight:bold;
  aspect-ratio:1/1; display:flex; align-items:center; justify-content:center;
  cursor:pointer; transition:.15s ease; box-shadow:0 2px 4px rgba(0,0,0,.05);
}
.key-btn:hover{ background:#f0f0f0; border-color:var(--blue) }
.key-btn:active{ box-shadow:none; transform:translateY(1px) }
.key-btn.zero{ grid-column:1 / span 2; aspect-ratio:auto; height:100% }
.key-btn.backspace{ background-color:var(--wrong); color:#fff; border:1px solid var(--wrong); font-size:0; box-shadow:0 2px 4px rgba(0,0,0,0.1) }
.key-btn.backspace:hover{ background-color:var(--wrong); opacity:.9 }
.backspace-icon{ width:60%; height:60%; fill:#fff }

.input-with-label{ display:flex; flex-direction:column; align-items:center; gap:5px; flex-shrink:0; }
.input-keyboard-container{ display:flex; flex-direction:column; align-items:center; }
.input-keyboard-container > .input-with-label{ order:2; }
.input-keyboard-container > .keyboard{ order:1; margin-top:0; }

/* Keuzes opgave 3 */
.choices-container{ margin:15px 0; width:100%; max-width:500px; flex-shrink:0; }
.choices-row{ display:flex; flex-wrap:wrap; justify-content:center; gap:12px; }
.choice-btn{ flex:1 1 auto; min-width:100px; padding:15px 10px; font-size:1.1em; font-weight:bold; }
.choice-btn.selected{ background:var(--blue); color:#fff; border-color:var(--blue-dark) }

/* Compacte stand ~ Chromebook 1242×698 */
@media (max-height:740px){
  :root{ --navH:60px; --pad:12px; }
  .stage{ padding:8px; }
  .card{ padding: calc(var(--pad) + 2px) var(--pad) var(--pad); }
  .pageBtn{ width:40px; height:40px; border-radius:20px; }
  .pageBtn.current{ width:48px; height:48px; border-radius:24px; font-size:16px; }
  .keyboard{ gap:8px; padding:8px; }
  .key-btn{ font-size:clamp(24px, 3.5vw, 36px); }
  .image-container img{ max-height: clamp(200px, 30vh, 420px); }
}

/* Extra strak ≤ 640 px hoogte */
@media (max-height:640px){
  :root{ --navH:52px; --pad:10px; }
  body{ font-size:clamp(14px, 1vw + .35rem, 16px); }
  h1{ margin:0 0 8px; }
  .stage{ padding:6px; }
  .card{ padding: calc(var(--pad) + 2px) var(--pad) var(--pad); }
  .inner-panel{ margin:6px auto 0; }
  .choices-container{ margin:10px 0; } .choice-btn{ padding:12px 8px; }
  .keyboard{ gap:6px; padding:6px; max-width:300px; }
  .key-btn{ border-radius:10px; font-size:clamp(20px, 3.2vw, 30px); }
  .pageBtn{ width:36px; height:36px; border-radius:18px; }
  .pageBtn.current{ width:44px; height:44px; border-radius:22px; font-size:15px; }
  .bottomNav{ padding:8px 10px; }
  .navBtn{ padding:8px 14px; }
  .image-container img{ max-height: clamp(180px, 26vh, 380px); }
}
</style>
</head>
<body>
<!-- Blauwe balk met dynamische opdrachttekst en (tijdelijk) TTS-knop -->
<div class="sky">
  <div class="skyInner">
    <span id="barPrompt" aria-live="polite"></span>
    <span id="barAction"></span>
  </div>
</div>

<div class="stage">
<main class="card">

<section class="task active" data-kind="intro" data-tts="Controle van geluid. Druk op de knop met de driehoek. Als het geluid werkt, vink het vakje aan.">
  <h1>Controle van het geluid</h1>
  <p>
    <button id="audioPlay" class="audioBtn" aria-label="Speel geluid">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"/></svg>
    </button>
  </p>
  <p class="q">
    <label><input type="checkbox" class="check" id="soundOk"> Het geluid werkt</label>
  </p>
  <p class="q">Werkt het niet, meld dit aan je docent.</p>
  <p class="q">
    <button id="startBtn" class="btn" aria-label="Start">Start</button>
  </p>
</section>

<section class="task" data-kind="scene" data-tts="Uitlegscreen">
  <h1>Luisteren naar de uitleg</h1>
  <div class="inner-panel" aria-label="Uitlegscherm">
    <img src="jongetje.jpg" alt="Jongen" class="scene-boy">
    <img src="meisje.jpg" alt="Meisje" class="scene-girl">
    <button id="scenePlay" class="scene-play" aria-label="Afspelen" title="Afspelen">
      <img src="speel.jpg" alt="Afspelen">
    </button>
    <button id="scenePause" class="scene-pause hidden" aria-label="Pauzeer" title="Pauzeer">
      <img src="pauze.jpg" alt="Pauze">
    </button>
  </div>
</section>

<section class="task" data-kind="task" data-answer="13" data-tts="Opgave 1, Sophie heeft een briefje van tien euro, twee muntjes van twee euro en een muntje van één euro. Hoeveel euro heeft Sophie in totaal?">
  <h1>Opgave 1</h1>
  <p class="q">Sophie heeft 1 briefje van &euro;10, 2 muntjes van &euro;2 en 1 muntje van &euro;1. Hoeveel euro heeft Sophie in totaal?
    <button class="ttsImgBtn" aria-label="Speel opgave" title="Speel opgave"><img src="speel.jpg" alt="Speel"></button>
  </p>
  <div class="task-content-wrapper with-keyboard">
    <div class="image-container">
      <img src="01 geld.jpg" alt="Briefje van 10 euro, twee munten van 2 euro en één munt van 1 euro.">
    </div>
    <div class="input-keyboard-container">
      <div class="keyboard" data-target-input=".input"></div>
      <div class="input-with-label">
        <input class="input" type="text" inputmode="text" placeholder="Antwoordvak" data-numeric-only="true" />
      </div>
    </div>
  </div>
  <div class="feedback"></div>
</section>

<section class="task" data-kind="task" data-answer="13" data-tts="Opgave 2, Tom heeft drie rode blokken, zes groene en vier blauwe blokken. Hij stapelt alle blokken. Hoeveel blokken hoog wordt zijn toren?">
  <h1>Opgave 2</h1>
  <p class="q">Tom heeft 3 rode blokken, 6 groene en 4 blauwe blokken. Hij stapelt alle blokken. Hoeveel blokken hoog wordt zijn toren?
    <button class="ttsImgBtn" aria-label="Speel opgave" title="Speel opgave"><img src="speel.jpg" alt="Speel"></button>
  </p>
  <div class="task-content-wrapper with-keyboard">
    <div class="image-container">
      <img src="02 tom blokkentoren.jpg" alt="Blokken in drie kleuren die opgestapeld worden.">
    </div>
    <div class="input-keyboard-container">
      <div class="keyboard" data-target-input=".input"></div>
      <div class="input-with-label">
        <input class="input" type="text" inputmode="text" placeholder="Antwoordvak" data-numeric-only="true" />
      </div>
    </div>
  </div>
  <div class="feedback"></div>
</section>

<section class="task" data-kind="task" data-answer="5 uur" data-tts="Opgave 3, Het is nu drie uur. Over twee uur moet Lisa naar muziekles. Hoe laat is het dan?">
  <h1>Opgave 3</h1>
  <p class="q">Het is nu 3 uur. Over twee uur moet Lisa naar muziekles. Hoe laat is het dan?
    <button class="ttsImgBtn" aria-label="Speel opgave" title="Speel opgave"><img src="speel.jpg" alt="Speel"></button>
  </p>
  <div class="task-content-wrapper">
    <div class="image-container">
      <img src="03 muziekles.jpg" alt="Illustratie van een klok of tijd.">
    </div>
    <div class="choices-container">
      <div class="choices-row">
        <button class="choice-btn btn" data-value="2 uur">2 uur</button>
        <button class="choice-btn btn" data-value="3 uur">3 uur</button>
        <button class="choice-btn btn" data-value="4 uur">4 uur</button>
        <button class="choice-btn btn" data-value="5 uur">5 uur</button>
      </div>
    </div>
  </div>
  <div class="feedback"></div>
</section>

<section
