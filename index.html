<!doctype html>
<html lang="nl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Voorbeeldtoets Groep 3, Oefenomgeving, fullscreen responsive</title>
    <style>
        :root {
            --bg: #f2f2f2;
            --panel: #fff;
            --blue: #0d6efd;
            --blue-dark: #0b5ed7;
            --line: #e6e6e6;
            --text: #000;
            --muted: #666;
            --ok: #2fb073;
            --wrong: #b02f2f;
            --amber: #c58a00;
            --pad: clamp(10px, 1.8vw, 20px); /* Smaller padding */
            --radius: 12px; /* Smaller radius */
            --navH: 64px; /* Smaller navigation bar height */
        }

        html, body { height: 100%; margin: 0; padding: 0; }
        body {
            min-height: 100svh;
            font-family: Arial, Helvetica, sans-serif;
            font-size: clamp(14px, 1.1vw + .3rem, 16px);
            line-height: 1.4;
            color: var(--text);
            background: var(--bg);
            display: flex;
            flex-direction: column;
            padding-top: var(--navH);
            padding-bottom: var(--navH);
            overflow: hidden; /* Prevent scrolling completely */
        }

        /* Headerbalk - VASTGEZET bovenaan */
        .sky {
            height: var(--navH);
            background: var(--blue);
            flex: 0 0 auto;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            padding: 4px 15px;
            text-align: center;
        }

        #question-in-sky {
            font-size: clamp(15px, 1.4vw, 18px); /* Compact font size */
            font-weight: bold;
            line-height: 1.3;
        }

        /* Hoofdpodium vult het resterende scherm */
        .stage {
            flex: 1 1 auto;
            min-height: 0;
            display: flex;
            padding: clamp(8px, 1vw, 12px); /* Smaller padding */
        }

        /* De “card” wordt het canvas dat het scherm vult */
        .card {
            background: var(--panel);
            width: 100%;
            height: 100%;
            min-height: 0;
            border-radius: 0;
            box-shadow: none;
            padding: var(--pad);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        @media (min-width: 900px) {
            .card {
                max-width: 1200px;
                margin: 0 auto;
                border-radius: var(--radius);
                box-shadow: 0 1px 12px rgba(0, 0, 0, .08);
            }
        }

        h1 { font-size: clamp(17px, 1.2vw + .7rem, 22px); font-weight: bold; margin: 0 0 10px; }
        p { margin: 0 0 8px; }

        /* Verberg de originele vraagtekst */
        .task > .q { display: none; }
        .task > h1 + .q { display: none; }

        .input { font-size: clamp(15px, 1vw + .5rem, 17px); padding: 9px 11px; border-radius: 8px; border: 1px solid #bbb; width: 100%; flex-shrink: 0; }

        .feedback { margin-top: 8px; font-weight: bold; text-align: center; flex-shrink: 0; }
        .ok { color: var(--ok); }
        .wrong { color: var(--wrong); }

        .ttsImgBtn { border: 0; background: transparent; padding: 0; margin-left: 8px; cursor: pointer; display: inline-flex; align-items: center; }
        .ttsImgBtn img { width: 36px; height: 36px; display: block; }
        .audioBtn { border: 0; background: #eee; width: 44px; height: 44px; border-radius: 22px; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; }
        .audioBtn svg { width: 20px; height: 20px; fill: var(--blue); }

        .task { text-align: center; flex-grow: 1; display: flex; flex-direction: column; align-items: center; display: none !important; }
        .task.active { display: flex !important; overflow: hidden; }

        /* Onderbalk (Footer) */
        .bottomNav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 999;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            background: #fafafa;
            border-top: 1px solid #ececec;
            padding: 8px 12px;
            min-height: var(--navH);
        }

        .navBtn { border: 0; background: var(--blue); color: #fff; border-radius: 10px; padding: 10px 16px; font-size: clamp(14px, 1.2vw, 16px); font-weight: bold; cursor: pointer; flex: 0 0 auto; }
        .navBtn[disabled] { background: #e0e0e0; color: #666; border: 1px solid #d0d0d0; cursor: not-allowed; opacity: 1; }

        /* Pager */
        .pager { display: flex; align-items: center; gap: 6px; justify-content: center; flex: 1 1 auto; flex-wrap: nowrap; overflow: auto; padding: 4px; }
        .pageBtn { width: 40px; height: 40px; border-radius: 20px; border: 1px solid #d7d7d7; background: #eee; display: inline-flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer; padding: 0; line-height: 1; flex: 0 0 auto; }
        .pageBtn.current { width: 48px; height: 48px; border-radius: 24px; font-size: 16px; background: var(--blue); color: #fff; border-color: var(--blue); }
        .pageBtn.answered:not(.current) { background: #fff; }

        /* Wrapper voor afbeelding, invoer en toetsenbord */
        .task-content-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            flex-grow: 1;
            width: 100%;
            max-width: 1100px;
            margin: 0 auto;
            padding: 0;
            min-height: 0;
            height: 100%;
        }

        @media (min-width: 768px) {
            .task-content-wrapper.with-keyboard {
                flex-direction: row;
                justify-content: center;
                align-items: center;
                gap: clamp(15px, 2.5vw, 30px);
            }
        }

        .image-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 0;
            flex: 1 1 55%;
            height: 100%;
            min-width: 0;
        }

        .image-container img {
            max-height: 100%;
            max-width: 100%;
            width: auto;
            object-fit: contain;
            margin: 0;
            border-radius: var(--radius);
        }

        .input-keyboard-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-shrink: 0;
            width: clamp(240px, 22vw, 290px); /* Narrower keyboard */
        }

        /* Virtueel toetsenbord */
        .keyboard {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px; /* Smaller gaps */
            width: 100%;
            padding: 6px;
            background: var(--bg);
            border-radius: var(--radius);
        }

        .key-btn {
            background-color: var(--panel);
            color: var(--text);
            border: 1px solid var(--line);
            border-radius: 8px;
            padding: 0;
            font-size: clamp(20px, 2.2vw, 28px); /* Smaller font */
            font-weight: bold;
            aspect-ratio: 1.4 / 1; /* More rectangular buttons */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.1s ease;
        }
        .key-btn:active { transform: translateY(1px); }
        .key-btn.zero { grid-column: 1 / span 2; aspect-ratio: auto; }
        .key-btn.backspace { background-color: var(--wrong); color: white; border-color: var(--wrong); }
        .backspace-icon { width: 45%; height: 45%; fill: white; }

        .input-with-label { display: flex; flex-direction: column; align-items: center; width: 100%; }
        .input-keyboard-container>.input-with-label { order: -1; }
    </style>
</head>
<body>
    <div class="sky">
        <div id="question-in-sky"></div>
    </div>
    <div class="stage">
        <main class="card">
            <section class="task active" data-kind="intro" data-tts="Controle van geluid. Druk op de knop met de driehoek. Als het geluid werkt, vink het vakje aan.">
                <h1>Controle van het geluid</h1>
                <p><button id="audioPlay" class="audioBtn" aria-label="Speel geluid"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z" /></svg></button></p>
                <p class="q"><label><input type="checkbox" class="check" id="soundOk"> Het geluid werkt</label></p>
                <p class="q">Werkt het niet, meld dit aan je docent.</p>
                <p class="q"><button id="startBtn" class="btn" aria-label="Start">Start</button></p>
            </section>
            
            <section class="task" data-kind="task" data-answer="15" data-tts="Opgave 1, Sophie heeft een briefje van tien euro, twee muntjes van twee euro en een muntje van één euro. Hoeveel euro heeft Sophie in totaal?">
                <h1>Opgave 1</h1>
                <p class="q">Sophie heeft een briefje van tien euro, twee muntjes van twee euro en een muntje van één euro. Hoeveel euro heeft Sophie in totaal?<button class="ttsImgBtn" aria-label="Speel opgave" title="Speel opgave"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%230d6efd' d='M8 5v14l11-7z'/%3E%3C/svg%3E" alt="Speel"></button></p>
                <div class="task-content-wrapper with-keyboard">
                    <div class="image-container">
                        <img src="https://i.imgur.com/gKSPv3T.png" alt="Illustratie van geld: 10 euro biljet, twee 2-euromunten, een 1-euromunt.">
                    </div>
                    <div class="input-keyboard-container">
                        <div class="input-with-label">
                            <input class="input" type="text" inputmode="text" placeholder="Antwoordvak" data-numeric-only="true" />
                        </div>
                        <div class="keyboard" data-target-input=".input"></div>
                    </div>
                </div>
            </section>
            
            </main>
    </div>
    <script>
        // Het volledige JavaScript-blok, met de aanpassing voor de vraagbalk
        (function() {
            const tasks = [...document.querySelectorAll('.task')];
            if (tasks.length === 0) return;
            
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const pager = document.getElementById('pager');
            const questionBar = document.getElementById('question-in-sky');
            
            const taskIndexes = tasks.map((t, ix) => ({ ix, kind: t.dataset.kind }));
            const itemIx = taskIndexes.filter(x => x.kind === 'task').map(x => x.ix);
            const firstTask = itemIx[0];
            const introIx = tasks.findIndex(t => t.dataset.kind === 'intro');
            let i = introIx !== -1 ? introIx : (firstTask !== undefined ? firstTask : 0);
            
            function show(k) {
                tasks.forEach((t, ix) => t.classList.toggle('active', ix === k));
                const active = tasks[k];
                
                if (questionBar) {
                    questionBar.innerHTML = '';
                    if (active && active.dataset.kind === 'task') {
                        const questionEl = active.querySelector('p.q');
                        if (questionEl) {
                            const questionClone = questionEl.cloneNode(true);
                            const ttsButtonClone = questionClone.querySelector('.ttsImgBtn');
                            if (ttsButtonClone) { ttsButtonClone.remove(); }
                            questionBar.innerHTML = questionClone.innerHTML;
                        }
                    }
                }
                
                const kind = active?.dataset.kind;
                if(prevBtn) prevBtn.style.visibility = (kind === 'intro') ? 'hidden' : 'visible';

                if (kind === 'task') {
                    if(prevBtn) prevBtn.disabled = (itemIx.indexOf(k) === 0);
                }
            }

            // Plak hier de rest van het originele JavaScript...
            // Omdat het script lang is en ongewijzigd (behalve de 'show' functie),
            // laat ik het hier weg om het antwoord beknopt te houden.
            // Gebruik het script uit je originele bestand, maar vervang de `show(k)` functie
            // door de versie hierboven.
            
            // Voor de volledigheid, hier is de essentie:
            function init() {
                // ... alle event listeners en setup ...
                show(i);
            }
            // Zorg ervoor dat de rest van het script (keyboard, TTS, navigatie) aanwezig is.
            // De CSS en HTML hierboven zijn de belangrijkste wijzigingen.
            
            // Dummy 'init' om te laten zien waar 'show' wordt aangeroepen
            // init(); // Dit zou aan het einde van je script moeten staan

        })();
    </script>
</body>
</html>
